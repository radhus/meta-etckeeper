From 7f4647e0b6ca79f920b6d204d0d8da5d5b069088 Mon Sep 17 00:00:00 2001
From: William Johansson <radar@radhuset.org>
Date: Tue, 10 Jun 2014 00:10:31 +0200
Subject: [PATCH 3/4] Use ${ETCKEEPER_DEST} if present in *.d scripts

---
 post-install.d/50vcs-commit | 2 +-
 pre-install.d/10packagelist | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/post-install.d/50vcs-commit b/post-install.d/50vcs-commit
index 7710c4a..39f4ae5 100755
--- a/post-install.d/50vcs-commit
+++ b/post-install.d/50vcs-commit
@@ -1,7 +1,7 @@
 #!/bin/sh
 set -e
 		
-pl="/var/cache/etckeeper/packagelist"
+pl="${ETCKEEPER_DEST}/var/cache/etckeeper/packagelist"
 
 if etckeeper unclean; then
 	message="committing changes in /etc after $HIGHLEVEL_PACKAGE_MANAGER run"
diff --git a/pre-install.d/10packagelist b/pre-install.d/10packagelist
index e5fefa8..0fb5f7f 100755
--- a/pre-install.d/10packagelist
+++ b/pre-install.d/10packagelist
@@ -1,4 +1,4 @@
 #!/bin/sh
 # This list will be later used when committing.
-mkdir -p /var/cache/etckeeper/
-etckeeper list-installed > /var/cache/etckeeper/packagelist.pre-install
+mkdir -p ${ETCKEEPER_DEST}/var/cache/etckeeper/
+etckeeper list-installed > ${ETCKEEPER_DEST}/var/cache/etckeeper/packagelist.pre-install
-- 
1.9.1

